---
import '@/styles/global.css';
import '@/styles/fonts.css';

import seo from '@/constants/seo.ts';
const { title, description, keywords, canonical, og } = seo;

// En la parte del script de Astro, genera las fechas
const currentYear = new Date().getFullYear();
const currentDate = new Date().toISOString();
---

<!doctype html>
<html lang="es">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="icon" type="image/svg+xml" href="images/favicon.svg" />
		<link rel="icon" type="image/png" href="images/favicon-96x96.png" sizes="96x96" />
		<link rel="shortcut icon" href="images/favicon.ico" />
		<link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png" />
		<link rel="manifest" href="images/site.webmanifest" />
		<link rel="canonical" href={canonical} />
		<meta name="msapplication-TileColor" content="#f53b57" />
		<meta name="theme-color" content="#ffffff" />
		<meta name="description" content={description} />
		<meta name="keywords" content={keywords} />
		<meta name="generator" content="" />
		<meta name="author" content="Jose Manuel Montaño Saenz" />
		<meta name="copyright" content="Mooenz" />
		<meta name="robots" content="index,follow" />
		<meta http-equiv="expires" content="43200" />
		<title>{title}</title>

		<!-- Open Graph -->
		<meta property="og:title" content={title} />
		<meta property="og:description" content={description} />
		<meta property="og:type" content={og.type} />
		<meta property="og:url" content={og.url} />
		<meta property="og:image" content="/images/og-image.webp" />
		<meta property="og:locale" content={og.locale} />

		<!-- Twitter  -->
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:title" content={title} />
		<meta name="twitter:description" content={description} />
		<meta name="twitter:image" content="/images/og-image.webp" />
		<meta name="twitter:card" content="summary" />
		<meta name="twitter:site" content="@MooenzDev" />

		<!-- Google search console  -->
		<meta name="google-site-verification" content="qAWFc7fQ6Gcr1d5vlc-TKfYgqz3_Yl7wGAT_NDUUdBA" />

		<!-- Google tag (gtag.js) -->
		<script defer async src={`https://www.googletagmanager.com/gtag/js?id=G-MNYDCMVBPH`}></script>

		<!-- Datos estructurados del sitio -->
		<script
			type="application/ld+json"
			set:html={JSON.stringify({
				'@context': 'https://schema.org',
				'@type': 'Person',
				name: 'José Manuel Montaño Saenz',
				alternateName: 'Mooenz',
				url: 'https://mooenz.me/',
				image: {
					'@type': 'ImageObject',
					url: 'https://mooenz.me/images/og-image.webp',
					width: 1200,
					height: 630,
				},
				description: description,
				jobTitle: 'Desarrollador Frontend',
				worksFor: {
					'@type': 'Organization',
					name: 'Freelance',
				},
				address: {
					'@type': 'PostalAddress',
					addressLocality: 'Ibagué',
					addressRegion: 'Tolima',
					addressCountry: 'CO',
				},
				sameAs: ['https://twitter.com/MooenzDev', 'https://github.com/mooenz', 'https://www.linkedin.com/in/mooenz/'],
				knowsAbout: ['Desarrollo Web', 'JavaScript', 'TypeScript', 'React', 'Node.js', 'Astro'],
			})}
		/>

		<!-- Datos estructurados WebSite -->
		<script
			type="application/ld+json"
			set:html={JSON.stringify({
				'@context': 'https://schema.org',
				'@type': 'WebSite',
				name: 'José Manuel Montaño Saenz - Desarrollador Frontend',
				alternateName: 'Mooenz Portfolio',
				url: 'https://mooenz.me/',
				description: description,
				inLanguage: 'es-CO',
				author: {
					'@type': 'Person',
					name: 'José Manuel Montaño Saenz',
					url: 'https://mooenz.me/',
				},
				copyrightYear: currentYear,
				potentialAction: {
					'@type': 'SearchAction',
					target: {
						'@type': 'EntryPoint',
						urlTemplate: 'https://mooenz.me/?s={search_term_string}',
					},
					'query-input': 'required name=search_term_string',
				},
			})}
		/>

		<!-- Breadcrumb -->
		<script
			type="application/ld+json"
			set:html={JSON.stringify({
				'@context': 'https://schema.org',
				'@type': 'BreadcrumbList',
				itemListElement: [
					{
						'@type': 'ListItem',
						position: 1,
						name: 'Inicio',
						item: {
							'@type': 'WebPage',
							'@id': 'https://mooenz.me/',
							url: 'https://mooenz.me/',
						},
					},
				],
			})}
		/>

		<!-- Datos estructurados ProfilePage -->
		<script
			type="application/ld+json"
			set:html={JSON.stringify({
				'@context': 'https://schema.org',
				'@type': 'ProfilePage',
				mainEntity: {
					'@type': 'Person',
					name: 'José Manuel Montaño Saenz',
					alternateName: 'Mooenz',
				},
				dateCreated: '2024-01-01T00:00:00Z',
				dateModified: currentDate,
			})}
		/>

		<!-- Script inline ANTES de cargar los estilos -->
		<script is:inline>
			const userPrefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			const currentTheme = localStorage.getItem('theme');

			if (currentTheme === 'dark' || (!currentTheme && userPrefersDark)) {
				document.documentElement.classList.add('dark');
			}
		</script>
	</head>
	<body>
		<main>
			<slot />
		</main>
	</body>
</html>

<script>
	import { init3DButton, scrollItems, animateLetters, fadeInSections } from '@/utilities/animations.ts';

	// Inicializar cuando el DOM esté listo
	document.addEventListener('DOMContentLoaded', () => {
		init3DButton('#btn-principal');
		scrollItems('.project');
		animateLetters('.title');
		fadeInSections('.section', '.element');
	});
</script>
