---
import Button from '@/components/Button.astro';
import personal from '@/constants/personal-info';
import experience from '@/constants/experience.ts';
import Image from 'astro/components/Image.astro';
import avatar from '@/assets/images/jose-manuel-monta√±o-saenz.webp';
import LogoLinkedIn from '@/assets/icons/LogoLinkedIn.astro';
import LogoGithub from '@/assets/icons/LogoGitHub.astro';
---

<aside class="flex flex-col aside w-full overflow-x-auto lg:max-w-108 sm:p-6 sm-pt-6 pt-22 p-3 lg:py-8 pb-8 lg:bg-secondary items-stretch group">
	<!-- Personal information -->
	<div class="section">
		<figure class="ripple-container relative w-12 lg:w-20 mb-6 aspect-square bg-tertiary rounded-full">
			<Image src={avatar} alt="Avatar" width="127" height="127" title={`Avatar de ${personal.name}`} class="rounded-full w-30" />

			<div class="ripple pointer-events-none absolute z-100 top-[70%] left-[calc(100%-7px)] lg:left-[calc(100%-14px)] flex items-center bg-green-400/10 lg:bg-green-400 text-[10px] leading-[1em] whitespace-nowrap px-2 rounded-full h-[15px] lg:w-[15px] lg:group-hover:w-[142px] transition-all duration-300 ease-in-out group-hover:bg-green-400/10 group-hover:left-[calc(100%-7px)]">
				<span class="lg:opacity-0 text-green-400 group-hover:opacity-100 group-hover:transition-all group-hover:duration-300 group-hover:ease-in-out group-hover:delay-300">Disponible para trabajar</span>
			</div>
		</figure>
		<h1 class="title text-2xl font-bold">{personal.name}</h1>
		<p class="element text-lg mb-1 text-text-secondary">{personal.role}</p>

		<!-- How i am? -->
		<p class="element mt-4 sm:mt-7">{personal.expertise}</p>

		<!-- Contact -->
		<div class="element flex flex-wrap gap-5 mt-7 order-1">
			<Button variants="normal" href={personal.github} size="sm" attr={{ target: '_blank', rel: 'noopener noreferrer', title: 'Ir a mi perfil de Github' }}>
				<LogoGithub width={18} height={18} />
				<span>Github</span>
			</Button>

			<Button variants="normal" href={personal.linkedIn} size="sm" attr={{ target: '_blank', rel: 'noopener noreferrer', title: 'Ir a mi perfil de LinkedIn' }}>
				<LogoLinkedIn width={18} height={18} />
				<span>LinkedIn</span>
			</Button>
		</div>
	</div>

	<!-- Experience -->
	<div class="order-2">
		<h2 class="title text-2xl line-clamp-1 font-semibold mt-7 lg:mt-14 mb-4 lg:mb-7">Experiencia laboral</h2>
		<ul class="section line list-inside space-y-8">
			{
				experience.map(({ position, description, period, company }) => (
					<li class="element">
						<h3 class="mb-3 line-clamp-1 text-lg font-medium">{position}</h3>

						<p>
							<span class="line-circle text-text-secondary">
								{company} {period}
							</span>
							<br />
							{description}
						</p>
					</li>
				))
			}
		</ul>
	</div>
</aside>

<style>
	/*  */
	.element > p span {
		transition: color 0.5s ease-in-out;
	}
	/*  */
	.line {
		position: relative;
		padding-left: 24px;
		/* border-left: 1px solid var(--color-line-lateral); */
	}

	.line::before {
		content: '';
		position: absolute;
		left: 0;
		top: 0;
		width: 1px;
		height: 100%;
		background: linear-gradient(to bottom, rgb(0, 0, 0, 0) 0%, var(--color-line-lateral) 70%, rgb(0, 0, 0, 0) 100%);
	}

	.line-circle {
		position: relative;
	}

	.line-circle::before {
		content: '';
		position: absolute;
		left: -32px;
		top: 50%;
		width: 16px;
		height: 16px;
		background-color: var(--color-accent);
		border-radius: 50%;
		border: 4px solid var(--color-secondary);
		transform: translateY(-50%);
		transition:
			background-color 0.5s ease-in-out,
			border-color 0.5s ease-in-out;
	}

	.ripple-container {
		transition: background-color 0.5s ease-in-out;
	}

	@media (min-width(1024px)) {
		.ripple-container:hover .ripple::after {
			display: none;
			animation-play-state: paused;
		}

		.ripple::after {
			content: '';
			position: absolute;
			z-index: -1;
			width: 100%;
			height: 100%;
			background-color: var(--color-green-400);
			border-radius: 15px;
			animation: ripple 6.5s infinite ease-in-out;
			top: 0;
			left: 0;
		}

		@keyframes ripple {
			0% {
				transform: scale(1);
				opacity: 1;
			}
			23% {
				transform: scale(2);
				opacity: 0;
			}
			23%,
			100% {
				transform: scale(2);
				opacity: 0;
			}
		}
	}
</style>
